#!/usr/bin/env php
<?php
// application.php

$checkDirs = ['/../../', '/../', '/../../../../../'];

$found = false;
foreach ($checkDirs as $checkDir) {
    $autoloadFile = realpath(__DIR__ . $checkDir . '/vendor/autoload.php');
    if ($autoloadFile && file_exists($autoloadFile)) {
        require $autoloadFile;
        $found = true;
        break;
    }
}

if (!$found) {
    echo "Missing vendor/autoload.php - could not load dependencies.\n";
    exit(1);
}

use Fiddler\Command;
use Symfony\Component\Console\Application;

$application = new Application();
$application->add(new Command\BuildCommand());
$application->add(new Command\GitChangedCommand());
$application->run();
